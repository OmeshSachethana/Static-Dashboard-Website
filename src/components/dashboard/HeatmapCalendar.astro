---
// const currentYear = new Date().getFullYear();
// const currentMonth = new Date().getMonth();

// // Generate mock data for the last 12 months
// const months = Array.from({ length: 12 }, (_, i) => {
//   const date = new Date(currentYear, currentMonth - 11 + i, 1);
//   return {
//     name: date.toLocaleDateString('en-US', { month: 'short' }),
//     year: date.getFullYear(),
//     weeks: Array.from({ length: 4 }, () => 
//       Array.from({ length: 7 }, () => Math.floor(Math.random() * 100))
//     )
//   };
// }).reverse();

// // Activity levels for color coding
// const activityLevels = [
//   { level: 0, color: 'bg-gray-100 dark:bg-gray-800', label: 'No activity' },
//   { level: 1, color: 'bg-blue-100 dark:bg-blue-900', label: 'Low' },
//   { level: 2, color: 'bg-blue-300 dark:bg-blue-700', label: 'Medium' },
//   { level: 3, color: 'bg-blue-500', label: 'High' },
//   { level: 4, color: 'bg-blue-700 dark:bg-blue-500', label: 'Very High' }
// ];

// const weekDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
// const dailyActivity = Array.from({ length: 7 }, (_, i) => ({
//   day: weekDays[i],
//   hours: Array.from({ length: 24 }, () => Math.floor(Math.random() * 5))
// }));

// const peakHours = Array.from({ length: 24 }, (_, hour) => ({
//   hour: `${hour}:00`,
//   activity: Math.floor(Math.random() * 100)
// })).sort((a, b) => b.activity - a.activity).slice(0, 5);
// ---

// <div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-800 p-6">
//   <div class="flex flex-col lg:flex-row lg:items-center justify-between mb-6">
//     <div>
//       <h3 class="text-xl font-bold text-gray-800 dark:text-white">Activity Heatmap</h3>
//       <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Last 12 months of user activity</p>
//     </div>
    
//     <div class="flex items-center space-x-4 mt-4 lg:mt-0">
//       <div class="flex items-center space-x-2">
//         <span class="text-sm text-gray-600 dark:text-gray-400">View:</span>
//         <div class="flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1">
//           <button class="px-3 py-1 text-sm font-medium rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white shadow">
//             Year
//           </button>
//           <button class="px-3 py-1 text-sm font-medium rounded-md text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white">
//             Month
//           </button>
//           <button class="px-3 py-1 text-sm font-medium rounded-md text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white">
//             Week
//           </button>
//         </div>
//       </div>
      
//       <button class="px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-600 transition-colors">
//         <i class="fas fa-download mr-2"></i>
//         Export
//       </button>
//     </div>
//   </div>
  
//   <!-- Heatmap Grid -->
//   <div class="overflow-x-auto pb-4">
//     <div class="flex space-x-4 min-w-max">
//       {months.map((month, monthIndex) => (
//         <div class="flex-shrink-0" style="width: 180px;">
//           <div class="text-center mb-2">
//             <div class="font-medium text-gray-800 dark:text-white">{month.name}</div>
//             <div class="text-xs text-gray-500 dark:text-gray-400">{month.year}</div>
//           </div>
          
//           <div class="grid grid-cols-7 gap-1">
//             {month.weeks.flatMap((week, weekIndex) => 
//               week.map((activity, dayIndex) => {
//                 const level = Math.min(4, Math.floor(activity / 25));
//                 const color = activityLevels[level].color;
                
//                 return (
//                   <div 
//                     class={`w-5 h-5 ${color} rounded-sm cursor-pointer group relative`}
//                     title={`Activity: ${activity} users`}
//                     data-month="{monthIndex}"
//                     data-week="{weekIndex}"
//                     data-day="{dayIndex}"
//                     data-activity="{activity}"
//                   >
//                     {/* Tooltip */}
//                     <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 dark:bg-gray-800 text-white text-xs rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10">
//                       <div class="font-medium">{weekDays[dayIndex]}</div>
//                       <div>Week {weekIndex + 1}, {month.name}</div>
//                       <div class="mt-1 font-bold">{activity} users</div>
//                     </div>
//                   </div>
//                 );
//               })
//             )}
//           </div>
          
//           {/* Month summary */}
//           <div class="mt-2 text-center">
//             <div class="text-sm font-medium text-gray-800 dark:text-white">
//               {month.weeks.flat().reduce((a, b) => a + b, 0).toLocaleString()}
//             </div>
//             <div class="text-xs text-gray-500 dark:text-gray-400">total users</div>
//           </div>
//         </div>
//       ))}
//     </div>
//   </div>
  
//   <!-- Legend -->
//   <div class="flex items-center justify-between mt-6 pt-6 border-t border-gray-200 dark:border-gray-800">
//     <div class="flex items-center space-x-4">
//       <span class="text-sm text-gray-600 dark:text-gray-400">Activity level:</span>
//       <div class="flex items-center space-x-2">
//         {activityLevels.map((level, index) => (
//           <div class="flex items-center space-x-1">
//             <div class={`w-4 h-4 ${level.color} rounded-sm`}></div>
//             {index === activityLevels.length - 1 && (
//               <span class="text-xs text-gray-500 dark:text-gray-400">{level.label}</span>
//             )}
//           </div>
//         ))}
//       </div>
//     </div>
    
//     <div class="text-sm text-gray-500 dark:text-gray-400">
//       <span class="font-medium text-gray-800 dark:text-white">Total:</span> 1.2M activities
//     </div>
//   </div>
  
//   <!-- Detailed Analysis -->
//   <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
//     <!-- Daily Pattern -->
//     <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-5">
//       <h4 class="font-semibold text-gray-800 dark:text-white mb-4">Daily Activity Pattern</h4>
//       <div class="space-y-3">
//         {dailyActivity.map((day) => (
//           <div class="flex items-center">
//             <div class="w-12 text-sm text-gray-600 dark:text-gray-400">{day.day}</div>
//             <div class="flex-1 flex items-center space-x-1">
//               {day.hours.map((hourActivity, hour) => {
//                 const level = Math.min(4, Math.floor(hourActivity));
//                 const color = activityLevels[level].color;
//                 return (
//                   <div 
//                     class={`w-3 h-6 ${color} rounded-sm cursor-pointer`}
//                     title={`${day.day} ${hour}:00 - Activity: ${hourActivity}`}
//                   ></div>
//                 );
//               })}
//             </div>
//             <div class="w-12 text-right text-sm font-medium text-gray-800 dark:text-white">
//               {day.hours.reduce((a, b) => a + b, 0)}
//             </div>
//           </div>
//         ))}
//       </div>
      
//       <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
//         <div class="text-sm text-gray-600 dark:text-gray-400">
//           <i class="fas fa-chart-line mr-2"></i>
//           Peak activity: <span class="font-medium text-gray-800 dark:text-white">Weekdays 14:00-16:00</span>
//         </div>
//       </div>
//     </div>
    
//     <!-- Peak Hours & Stats -->
//     <div class="space-y-6">
//       <!-- Peak Hours -->
//       <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-5">
//         <h4 class="font-semibold text-gray-800 dark:text-white mb-4">Peak Activity Hours</h4>
//         <div class="space-y-3">
//           {peakHours.map((hour, index) => (
//             <div class="flex items-center justify-between">
//               <div class="flex items-center space-x-3">
//                 <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold">
//                   {index + 1}
//                 </div>
//                 <div>
//                   <div class="font-medium text-gray-800 dark:text-white">{hour.hour}</div>
//                   <div class="text-xs text-gray-500 dark:text-gray-400">{hour.activity} avg. users</div>
//                 </div>
//               </div>
//               <div class="w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
//                 <div 
//                   class="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full"
//                   style={`width: ${hour.activity}%`}
//                 ></div>
//               </div>
//             </div>
//           ))}
//         </div>
//       </div>
      
//       <!-- Quick Stats -->
//       <div class="grid grid-cols-2 gap-4">
//         <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4">
//           <div class="text-2xl font-bold text-gray-800 dark:text-white">142K</div>
//           <div class="text-sm text-gray-600 dark:text-gray-400">This Month</div>
//           <div class="flex items-center text-green-500 text-sm mt-1">
//             <i class="fas fa-arrow-up mr-1"></i>
//             <span>+12.5%</span>
//           </div>
//         </div>
        
//         <div class="bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4">
//           <div class="text-2xl font-bold text-gray-800 dark:text-white">3.2K</div>
//           <div class="text-sm text-gray-600 dark:text-gray-400">Daily Avg.</div>
//           <div class="flex items-center text-green-500 text-sm mt-1">
//             <i class="fas fa-arrow-up mr-1"></i>
//             <span>+8.2%</span>
//           </div>
//         </div>
//       </div>
//     </div>
//   </div>
  
//   <!-- Time Range Selector -->
//   <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-800">
//     <div class="flex items-center justify-between">
//       <div class="text-sm text-gray-600 dark:text-gray-400">
//         <i class="fas fa-calendar-alt mr-2"></i>
//         Date range: <span class="font-medium text-gray-800 dark:text-white">Jan 2023 - Dec 2023</span>
//       </div>
      
//       <div class="flex items-center space-x-2">
//         <button class="px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800">
//           <i class="fas fa-chevron-left mr-1"></i>
//           Previous
//         </button>
//         <button class="px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800">
//           Next
//           <i class="fas fa-chevron-right ml-1"></i>
//         </button>
//       </div>
//     </div>
//   </div>
// </div>

// <script>
//   // Heatmap interactions
//   document.addEventListener('DOMContentLoaded', function() {
//     const heatmapCells = document.querySelectorAll('.w-5.h-5.rounded-sm');
    
//     // Highlight cells on hover
//     heatmapCells.forEach(cell => {
//       cell.addEventListener('mouseenter', function() {
//         const activity = parseInt(this.getAttribute('data-activity'));
//         const level = Math.min(4, Math.floor(activity / 25));
        
//         // Highlight similar activity cells
//         heatmapCells.forEach(otherCell => {
//           const otherActivity = parseInt(otherCell.getAttribute('data-activity'));
//           const otherLevel = Math.min(4, Math.floor(otherActivity / 25));
          
//           if (otherLevel === level) {
//             otherCell.style.transform = 'scale(1.1)';
//             otherCell.style.zIndex = '10';
//           }
//         });
//       });
      
//       cell.addEventListener('mouseleave', function() {
//         heatmapCells.forEach(otherCell => {
//           otherCell.style.transform = '';
//           otherCell.style.zIndex = '';
//         });
//       });
      
//       // Click to view details
//       cell.addEventListener('click', function() {
//         const month = this.getAttribute('data-month');
//         const week = this.getAttribute('data-week');
//         const day = this.getAttribute('data-day');
//         const activity = this.getAttribute('data-activity');
        
//         // Show modal or update details panel
//         console.log(`Clicked: Month ${month}, Week ${week}, Day ${day}, Activity: ${activity}`);
        
//         // In a real app, you would update a details panel or show a modal
//         if (typeof showNotification !== 'undefined') {
//           showNotification(`Activity: ${activity} users on ${['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][day]}`, 'info');
//         }
//       });
//     });
    
//     // Auto-highlight current day
//     const now = new Date();
//     const currentDay = (now.getDay() + 6) % 7; // Convert to Mon-Sun (0-6)
//     const currentWeek = Math.floor((now.getDate() - 1) / 7);
    
//     // Find and pulse the current day cell
//     const currentCells = document.querySelectorAll(`[data-day="${currentDay}"]`);
//     if (currentCells.length > 0) {
//       const latestMonthCell = currentCells[currentCells.length - 1];
//       latestMonthCell.classList.add('animate-pulse');
      
//       // Add border to indicate today
//       latestMonthCell.classList.remove('rounded-sm');
//       latestMonthCell.classList.add('rounded', 'border-2', 'border-blue-500');
//     }
    
//     // Update heatmap data periodically
//     setInterval(() => {
//       // Simulate updating some random cells
//       const randomCells = Array.from(heatmapCells)
//         .sort(() => Math.random() - 0.5)
//         .slice(0, 5);
      
//       randomCells.forEach(cell => {
//         const currentActivity = parseInt(cell.getAttribute('data-activity'));
//         const change = Math.floor(Math.random() * 20) - 10;
//         const newActivity = Math.max(0, currentActivity + change);
        
//         cell.setAttribute('data-activity', newActivity);
//         cell.setAttribute('title', `Activity: ${newActivity} users`);
        
//         // Update tooltip content
//         const tooltip = cell.querySelector('.absolute.bottom-full');
//         if (tooltip) {
//           const boldElement = tooltip.querySelector('.font-bold');
//           if (boldElement) {
//             boldElement.textContent = `${newActivity} users`;
//           }
//         }
        
//         // Update color based on new activity
//         const level = Math.min(4, Math.floor(newActivity / 25));
//         const colors = [
//           'bg-gray-100 dark:bg-gray-800',
//           'bg-blue-100 dark:bg-blue-900',
//           'bg-blue-300 dark:bg-blue-700',
//           'bg-blue-500',
//           'bg-blue-700 dark:bg-blue-500'
//         ];
        
//         // Remove old color classes
//         colors.forEach(color => cell.classList.remove(color));
//         // Add new color
//         cell.classList.add(colors[level]);
//       });
//     }, 10000);
//   });
// </script>

// <style>
//   .heatmap-cell {
//     transition: all 0.2s ease;
//   }
  
//   .heatmap-cell:hover {
//     transform: scale(1.2);
//     z-index: 20;
//   }
  
//   @keyframes pulse {
//     0%, 100% {
//       opacity: 1;
//     }
//     50% {
//       opacity: 0.7;
//     }
//   }
  
//   .animate-pulse {
//     animation: pulse 2s infinite;
//   }
// </style>